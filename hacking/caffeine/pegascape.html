

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using PegaScape (Caffeine) &mdash; Homebrew Guide  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/table_styling.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Safety Precautions (Caffeine)" href="safetyprecautions.html" />
    <link rel="prev" title="SD Card Setup (Caffeine)" href="sdsetup.html" />
<meta name="sourcename" content="hacking/caffeine/pegascape.rst.txt" />
<script>
    function getCookie(cname) {
      var name = cname + "=";
      var decodedCookie = decodeURIComponent(document.cookie);
      var ca = decodedCookie.split(';');
      for(var i = 0; i <ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }
    
    var head = document.getElementsByTagName('HEAD')[0];  
    var link = document.createElement('link'); 
    link.rel = 'stylesheet';  
    link.type = 'text/css'; 
    var theme = getCookie('user_theme');
    if (theme == "dark") {
        link.href = '/_static/theme-dark.css';
    } else {
        link.href = '/_static/theme-light.css';
    }
    head.appendChild(link);
</script>



</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../gettingstarted/beforestarting.html">Before Starting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gettingstarted/checkingrcm.html">Checking RCM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gettingstarted/choosinganexploit.html">Choosing an Exploit</a></li>
</ul>
<p class="caption"><span class="caption-text">Hacking Your Switch</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../fuseegelee.html">fusee-gelee</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nereba.html">Nereba</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../caffeine.html">Caffeine</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="forewarning.html">Forewarning (Caffeine)</a></li>
<li class="toctree-l2"><a class="reference internal" href="sdsetup.html">SD Card Setup (Caffeine)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using PegaScape (Caffeine)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step-0-understanding-switch-browser-entrypoints">Step 0: Understanding Switch Browser Entrypoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-1-configuring-pegascape-wifi-authentication-prompt">Step 1: Configuring PegaScape (Wifi Authentication Prompt)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-2-injecting-fake-news">Step 2: Injecting Fake News</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-3-configuring-pegascape-fake-news">Step 3: Configuring PegaScape (Fake News)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-4-rebooting-to-hekate-caffeine">Step 4: Rebooting to Hekate (Caffeine)</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="safetyprecautions.html">Safety Precautions (Caffeine)</a></li>
<li class="toctree-l2"><a class="reference internal" href="aftersetup.html">After Setup (Caffeine)</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Using CFW</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usingcfw/hekate.html">Using and Configuring Hekate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingcfw/manualupgrade.html">Updating/Downgrading Manually</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usingcfw/manualchoiupgrade.html">Upgrading/Downgrading Manually With a PC</a></li>
</ul>
<p class="caption"><span class="caption-text">Creating an emuMMC</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../emummc/emummc.html">Create an emuMMC</a></li>
</ul>
<p class="caption"><span class="caption-text">Homebrew Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../homebrew_dev/introduction.html">Introduction to Homebrew development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../homebrew_dev/app_dev.html">Homebrew app development</a></li>
</ul>
<p class="caption"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wiiu.html">Wii U Homebrew Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../donate.html">Donate</a></li>
</ul>
<p class="caption"><span class="caption-text">Options</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../switch-theme.html">Switch Theme (Light &lt;–&gt; Dark)</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Homebrew Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../caffeine.html">Caffeine</a> &raquo;</li>
        
      <li>Using PegaScape (Caffeine)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/noahc3/Homebrew-Guide/blob/master/hacking/caffeine/pegascape.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-pegascape-caffeine">
<h1>Using PegaScape (Caffeine)<a class="headerlink" href="#using-pegascape-caffeine" title="Permalink to this headline">¶</a></h1>
<p>PegaScape is a user-friendly frontend for launching browser based Nintendo Switch exploits. PegaScape is accessed by setting a custom DNS on your Switch which redirects certain URLs to PegaScape servers. We will now configure your Switch to access PegaScape.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When you have a PegaScape DNS server configured, <strong>you will not be able to access any Nintendo services, including multiplayer, game and system updates, news, etc.</strong> PegaScape and online homebrew will still work.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If something goes wrong or you need help, check <a class="reference external" href="/troubleshooting.html">troubleshooting</a>.</p>
</div>
<hr class="docutils" />
<div class="section" id="step-0-understanding-switch-browser-entrypoints">
<h2>Step 0: Understanding Switch Browser Entrypoints<a class="headerlink" href="#step-0-understanding-switch-browser-entrypoints" title="Permalink to this headline">¶</a></h2>
<p>Since firmware 2.0.0, the Nintendo Switch has two ways to access the browser, both of which are <strong>free</strong>.</p>
<p>The first browser is the Wifi Authentication Prompt. This is accessed when trying to connect to a wireless network in Internet settings which does not pass the connection test, or by attempting to link a Nintendo Account on a wireless network which does not pass the connection test. The prompt to link a Nintendo account can be accessed by tapping the eShop icon on the home menu when you do not already have an account linked.</p>
<p>The second browser is through the News applet. Most news entries use HTTPS, so we cannot redirect them with a DNS. However, we can inject our own News entry which points to a normal HTTP URL, which can be redirected. This entrypoint is called “Fake News”.</p>
<p>This guide will first have you access PegaScape through the Wifi Authentication Prompt to install Fake News, then change your DNS to allow the use of Fake News.</p>
</div>
<hr class="docutils" />
<div class="section" id="step-1-configuring-pegascape-wifi-authentication-prompt">
<h2>Step 1: Configuring PegaScape (Wifi Authentication Prompt)<a class="headerlink" href="#step-1-configuring-pegascape-wifi-authentication-prompt" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Power on your Switch normally.</p></li>
<li><p>Open settings and go to the Internet tab</p></li>
<li><p>Delete your existing WiFi connection configuration if you have one for the network you want to connect to</p></li>
<li><p>Add your WiFi network, <strong>but type in a long, wrong password</strong> to fail the connection test.</p></li>
<li><p>After the connection test fails, choose to change settings.</p></li>
<li><p>Set DNS Settings to Manual</p></li>
<li><p>Set <strong>‘Primary DNS’</strong> to <strong>‘51.15.245.41’</strong></p></li>
<li><p>Set <strong>‘Secondary DNS’</strong> to <strong>‘163.172.141.219’</strong></p></li>
<li><p>Re-enter your WiFi password, correctly this time.</p></li>
<li><p>Save and perform a connection test by connecting to the network.</p></li>
<li><p><strong>You should be told that the WiFi network requires registration.</strong> Click Next.</p>
<ul>
<li><p>If the connection test passes without the registration prompt:</p>
<blockquote>
<div><ul>
<li><p><strong>Immediately delete the WiFi connection setting.</strong> It is possible that your router is overriding the Switch’s DNS settings with its own. You will need to determine how to disable this settings on your router, or set the PegaScape DNS settings on your router.</p>
<blockquote>
<div><ul class="simple">
<li><p>Not fixing this on your router will not only cause PegaScape to not work, but you could get “supernag” which prevents you from launching the browser, which would permanently block you from using PegaScape.</p></li>
<li><p>Every router is different so unfortunately we can not help with this step.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p>If you are told you must update your system to use the web browser, your system has been hit with “supernag”. Your console previously connected to the internet, discovered an update was available, and will not let you use the Internet browser until you update.</p>
<blockquote>
<div><ul>
<li><p>If your console is IPATCHED:</p>
<blockquote>
<div><ul class="simple">
<li><p>At this stage, your console cannot use the internet browser, and is therefore locked out of PegaScape. You unfortunately cannot use CFW at this time as there is no known way to remove the supernag.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>If your console can launch payloads through RCM with fusee-gelee:</p>
<blockquote>
<div><ul class="simple">
<li><p>You should install CFW with fusee-gelee and use <a class="reference external" href="https://github.com/Adubbz/Gag-Order">Gag-Order</a> to remove the supernag.</p></li>
<li><p>If you do not already have working CFW through fusee-gelee, jump to <a class="reference external" href="/hacking/fuseegelee/sdsetup">SD Card Setup (fusee-gelee)</a></p></li>
<li><p>You can come back here when you are done.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
<li><p>Wait for the PegaScape page to load.</p></li>
</ol>
</div>
<div class="section" id="step-2-injecting-fake-news">
<h2>Step 2: Injecting Fake News<a class="headerlink" href="#step-2-injecting-fake-news" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>On the PegaScape page, select the <strong>hbmenu</strong> icon. Wait for a success alert to pop up.</p>
<blockquote>
<div><ul>
<li><p>If the exploit fails or takes longer than 60 seconds to load, press the HOME button, repeat the connection test in Internet settings, and try again.</p>
<blockquote>
<div><ul class="simple">
<li><p>If your Switch white screens trying to do this, hold <strong>POWER</strong> for 15 seconds to shutdown, then try again.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p>Press HOME</p></li>
<li><p>Tap the <strong>Album</strong> icon. This should load hbmenu.</p></li>
<li><p>Launch the <strong>“Fake News Injector”</strong> homebrew</p></li>
<li><p>Press ‘+’ to reboot your console once finished.</p></li>
</ol>
</div>
<div class="section" id="step-3-configuring-pegascape-fake-news">
<h2>Step 3: Configuring PegaScape (Fake News)<a class="headerlink" href="#step-3-configuring-pegascape-fake-news" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Open settings and go to the Internet tab</p></li>
<li><p>Select your WiFi network and pick Change Settings</p></li>
<li><p>Set <strong>‘Primary DNS’</strong> to <strong>‘163.172.181.170’</strong></p></li>
<li><p>Save and perform the connection test.</p></li>
<li><p><strong>The connection test should pass without any registration prompt.</strong> Press HOME.</p></li>
<li><p>Tap the <strong>News</strong> icon.</p></li>
<li><p>Select the new <strong>“Launch PegaSwitch”</strong> news entry.</p></li>
<li><p>Tap the “ReSwitched” video to load PegaScape.</p></li>
</ol>
</div>
<div class="section" id="step-4-rebooting-to-hekate-caffeine">
<h2>Step 4: Rebooting to Hekate (Caffeine)<a class="headerlink" href="#step-4-rebooting-to-hekate-caffeine" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>On the PegaScape page, select the <strong>Caffeine</strong> icon. Wait for a prompt with a textbox to appear.</p>
<blockquote>
<div><ul>
<li><p>On firmwares 4.0.1 and 4.1.0, the spinner will freeze and the exploit can take up to 45 seconds to run. Be patient.</p></li>
<li><p>If the exploit fails or takes longer than 60 seconds to load, press the HOME button, reopen the browser through Fake News and try again.</p>
<blockquote>
<div><ul class="simple">
<li><p>If your Switch white screens trying to do this, hold <strong>POWER</strong> for 15 seconds to shutdown, then try again.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p>When the prompt with the textbox appears, <strong>tap</strong> the textbox. The keyboard will not appear.</p></li>
<li><p><strong>Wait five full seconds.</strong></p></li>
<li><p>Press the power button to enter sleep mode.</p></li>
</ol>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>After a few seconds, your Switch should reboot into Hekate. Congratulations! You can now reboot into Hekate from PegaScape.</p>
</div>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>If nothing appears on the screen, hold the power button for 15 seconds to shutdown your Switch. Turn your Switch back on and try launching Caffeine again. This can sometimes take a few tries.</p>
</div>
<hr class="docutils" />
<div class="admonition warning">
        <p class="last">Continue to <a href="/hacking/caffeine/safetyprecautions">Safety Precautions (Caffeine)</a></p>
</div><div class="toctree-wrapper compound">
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019-2020, noahc3 and friends

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>